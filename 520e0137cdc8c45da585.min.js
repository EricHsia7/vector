"use strict";(self.webpackChunkvector=self.webpackChunkvector||[]).push([[180],{655:(t,n,c)=>{c.d(n,{R:()=>o});var e=c(495);function o(t,n,c,o,a,r,i,s,l,u,y,f,h,d,p){return{x:t||0,y:n||0,width:c||0,height:o||0,rx:a||0,ry:r||0,fill:i||"none",stroke:s||"none",strokeWidth:l||0,strokeDasharray:u||"",strokeLinecap:y||"butt",strokeLinejoin:f||"miter",transform:h||[],opacity:d||1,visibility:p||"visible",id:(0,e.g)(),type:"rect"}}},106:(t,n,c)=>{c.d(n,{p:()=>o});var e=c(495);function o(t,n,c,o,a,r,i){return{x:a?0:t||0,y:a?0:n||0,width:c||0,height:o||0,root:a||!1,elements:r||[],subPlanes:i||[],id:(0,e.g)(),type:"plane"}}},284:(t,n,c)=>{c.d(n,{W:()=>r});var e=c(621);function o(t,n){var c="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!c){if(Array.isArray(t)||(c=function(t,n){if(t){if("string"==typeof t)return a(t,n);var c={}.toString.call(t).slice(8,-1);return"Object"===c&&t.constructor&&(c=t.constructor.name),"Map"===c||"Set"===c?Array.from(t):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?a(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){c&&(t=c);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){c=c.call(t)},n:function(){var t=c.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==c.return||c.return()}finally{if(s)throw r}}}}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var c=0,e=Array(n);c<n;c++)e[c]=t[c];return e}function r(t,n){return'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t.width,'" height="').concat(t.height,'" viewBox="0 0 ').concat(t.width," ").concat(t.height,'">').concat(function t(n,c){var a="";function r(t,n){if(n.flattenTransform){var c=(0,e.DH)(t);return o="matrix(".concat(c[0][0],",").concat(c[1][0],",").concat(c[0][1],",").concat(c[1][1],",").concat(c[0][2],",").concat(c[1][2],")")}for(var o=[],a=t.length,r=0;r<a;r++){var i;switch(null===(i=t[r])||void 0===i?void 0:i.type){case"translate":o.push("translate(".concat(t[r].x,",").concat(t[r].y,")"));break;case"scale":o.push("scale(".concat(t[r].x,",").concat(t[r].y,")"));break;case"rotate":o.push("rotate(".concat(t[r].deg,")"));break;case"skewX":o.push("skewX(".concat(t[r].deg,")"));break;case"skewY":o.push("skewY(".concat(t[r].deg,")"))}}return o.join(" ")}function i(t,n){return t.map((function(t){return"".concat(t.x+n.x,",").concat(t.y+n.y)})).join(" ")}function s(t,n){var e=Math.abs(t.width),o=Math.abs(t.height),a=t.x,i=t.y;return t.width<0&&(a-=e),t.height<0&&(i-=o),'<rect x="'.concat(a+n.x,'" y="').concat(i+n.y,'" width="').concat(e,'" height="').concat(o,'" rx="').concat(t.rx,'" ry="').concat(t.ry,'" fill="').concat(t.fill,'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}function l(t,n){return'<circle cx="'.concat(t.cx+n.x,'" cy="').concat(t.cy+n.y,'" r="').concat(t.r,'" fill="').concat(t.fill,'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}function u(t,n){return'<ellipse cx="'.concat(t.cx+n.x,'" cy="').concat(t.cy+n.y,'" rx="').concat(t.rx,'" ry="').concat(t.ry,'" fill="').concat(t.fill,'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}function y(t,n){return'<line x1="'.concat(t.x1+n.x,'" y1="').concat(t.y1+n.y,'" x2="').concat(t.x2+n.x,'" y2="').concat(t.y2+n.y,'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}function f(t,n){return'<polyline points="'.concat(i(t.points,n),'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}function h(t,n){return'<polygon points="'.concat(i(t.points,n),'" fill="').concat(t.fill,'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}function d(t,n){return'<path d="'.concat(function(t,n){var c,e=[],a=o(t);try{for(a.s();!(c=a.n()).done;){var r=c.value;switch(null==r?void 0:r.type){case"M":e.push("M ".concat(r.x+n.x," ").concat(r.y+n.y));break;case"L":e.push("L ".concat(r.x+n.x," ").concat(r.y+n.y));break;case"H":e.push("H ".concat(r.x+n.x));break;case"V":e.push("V ".concat(r.y+n.y));break;case"C":e.push("C ".concat(r.x1+n.x," ").concat(r.y1+n.y,",").concat(r.x2+n.x," ").concat(r.y2+n.y,",").concat(r.x+n.x," ").concat(r.y+n.y));break;case"S":e.push("S ".concat(r.x2+n.x," ").concat(r.y2+n.y,",").concat(r.x+n.x," ").concat(r.y+n.y));break;case"Q":e.push("Q ".concat(r.x1+n.x," ").concat(r.y1+n.y," ").concat(r.x+n.x," ").concat(r.y+n.y));break;case"T":e.push("T ".concat(r.x+n.x," ").concat(r.y+n.y));break;case"A":e.push("A ".concat(r.rx," ").concat(r.ry," ").concat(r.xAxisRotation," ").concat(r.largeArcFlag," ").concat(r.sweepFlag," ").concat(r.x+n.x," ").concat(r.y+n.y));break;case"Z":e.push("Z")}}}catch(t){a.e(t)}finally{a.f()}return e.join(" ")}(t.d,n),'" fill="').concat(t.fill,'" stroke="').concat(t.stroke,'" stroke-width="').concat(t.strokeWidth,'" stroke-dasharray="').concat(t.strokeDasharray,'" stroke-linecap="').concat(t.strokeLinecap,'" stroke-linejoin="').concat(t.strokeLinejoin,'" transform="').concat(r(t.transform,c),'" opacity="').concat(t.opacity,'" visibility="').concat(t.visibility,'" ').concat(c.exceptID?"":' id="'.concat(t.id,'" '),"/>")}var p,k=o(n.elements);try{for(k.s();!(p=k.n()).done;){var v,b=p.value;switch(null===(v=b)||void 0===v?void 0:v.type){case"rect":a+=s(b,n);break;case"circle":a+=l(b,n);break;case"ellipse":a+=u(b,n);break;case"line":a+=y(b,n);break;case"polyline":a+=f(b,n);break;case"polygon":a+=h(b,n);break;case"path":a+=d(b,n)}}}catch(t){k.e(t)}finally{k.f()}var x,m=o(n.subPlanes);try{for(m.s();!(x=m.n()).done;){a+=t(x.value,c)}}catch(t){m.e(t)}finally{m.f()}return"<g".concat(c.exceptID?"":' id="'.concat(n.id,'"'),">").concat(a,"</g>")}(t,n),"</svg>")}},621:(t,n,c)=>{function e(t){var n=t.deg*Math.PI/180;return[[1,Math.tan(n),0],[0,1,0],[0,0,1]]}function o(t){var n=t.deg*Math.PI/180;return[[1,0,0],[Math.tan(n),1,0],[0,0,1]]}function a(t,n){for(var c=[[0,0,0],[0,0,0],[0,0,0]],e=0;e<3;e++)for(var o=0;o<3;o++)for(var a=0;a<3;a++)c[e][o]+=t[e][a]*n[a][o];return c}function r(t){for(var n,c,r,i,s=[[1,0,0],[0,1,0],[0,0,1]],l=t.length,u=0;u<l;u++){var y,f;switch(null===(y=t[u])||void 0===y?void 0:y.type){case"translate":f=[[1,0,(i=t[u]).x],[0,1,i.y],[0,0,1]];break;case"scale":f=[[(r=t[u]).x,0,0],[0,r.y,0],[0,0,1]];break;case"rotate":n=t[u],c=void 0,c=n.deg*Math.PI/180,f=[[Math.cos(c),-Math.sin(c),0],[Math.sin(c),Math.cos(c),0],[0,0,1]];break;case"skewX":f=e(t[u]);break;case"skewY":f=o(t[u]);break;default:f=[[1,0,0],[0,1,0],[0,0,1]]}s=a(f,s)}return s}function i(t,n){var c=r(n);return t.map((function(t){return function(t,n){return{x:t[0][0]*n.x+t[0][1]*n.y+t[0][2],y:t[1][0]*n.x+t[1][1]*n.y+t[1][2]}}(c,t)}))}c.d(n,{DH:()=>r,_I:()=>i})},180:(t,n,c)=>{c.d(n,{default:()=>b});var e=c(621),o=c(655),a=c(357),r=c(106),i=c(284),s=c(72),l=c(124),u=document.querySelector(".g"),y=document.querySelector(".f");var f=c(661),h={noto_sans_tc:!1,material_symbols:!1};function d(t,n){if(!1===h[n]){var c=document.createElement("link");c.setAttribute("href",t),c.setAttribute("rel","stylesheet"),document.head.appendChild(c),h[n]=!0}}var p=c(758);function k(t,n){var c="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!c){if(Array.isArray(t)||(c=function(t,n){if(t){if("string"==typeof t)return v(t,n);var c={}.toString.call(t).slice(8,-1);return"Object"===c&&t.constructor&&(c=t.constructor.name),"Map"===c||"Set"===c?Array.from(t):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?v(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){c&&(t=c);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,i=!1;return{s:function(){c=c.call(t)},n:function(){var t=c.next();return r=t.done,t},e:function(t){i=!0,a=t},f:function(){try{r||null==c.return||c.return()}finally{if(i)throw a}}}}function v(t,n){(null==n||n>t.length)&&(n=t.length);for(var c=0,e=Array(n);c<n;c++)e[c]=t[c];return e}window.vector={test:{createTransformationMatrix:e.DH,transformPoints:e._I,r:function(){var t=(0,r.p)(0,0,300,300,!0),n=(0,o.R)(10,20,50,80,10,10,"#000",null,null,null,null,null,[{type:"rotate",deg:20},{type:"translate",x:90,y:40}],1,null);t.elements.push(n);var c=(0,r.p)(5,5,60,60,!1,null,null),e=(0,o.R)(5,5,50,50,5,5,"#000"),s=(0,a.R)(0,0,20,20,20,"#000",null,null,null,null,null,[{type:"scale",x:1.5,y:1.2}],.8,null);c.elements.push(e),c.elements.push(s),t.subPlanes.push(c),console.log(JSON.stringify(t)),console.log((0,i.W)(t,{flattenTransform:!1,exceptID:!1}));var l,u=k(c.elements.concat(t.elements));try{for(u.s();!(l=u.n()).done;){var y=l.value;try{var f=(0,p.Yx)(y);console.log(y),console.log(f);var h=(0,p.KQ)(f,1,!0);console.log(h)}catch(t){console.log(t)}}}catch(t){u.e(t)}finally{u.f()}console.log((0,p.RM)((0,p.Yx)(e),(0,p.Yx)(s)))}},toolbar:{switchTool:s.dH,switchShapeType:f.YE},documents:{newDocument:{openNewDocument:function(){u.setAttribute("displayed",!0),y.setAttribute("displayed",!0)},closeNewDocument:function(){u.setAttribute("displayed",!1),y.setAttribute("displayed",!1)},createDocumentWithInputs:function(){var t=String(u.querySelector("#new_document_name").value)||"Untitled",n=parseInt(u.querySelector("#new_document_width").value)||64,c=parseInt(u.querySelector("#new_document_height").value)||64,e=(0,l.BV)(n,c,null,null,t);(0,l.EJ)(e.id)}}},initialize:function(){(0,s.A6)(),(0,l.UI)(),console.log(0)},secondlyInitialize:function(){d("https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap","noto_sans_tc"),d("https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200","material_symbols")}};const b=window.vector},495:(t,n,c)=>{c.d(n,{T:()=>o,g:()=>e});var e=c(831).v4;function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;if(0===t)return[0,1];for(var c=1,e=1,o=0,a=1,r=Math.abs(t);e<=n;){c=Math.round(t*e);var i=Math.abs(t-c/e);i<r&&(o=c,a=e,r=i),e++}return[o,a]}}}]);
//# sourceMappingURL=520e0137cdc8c45da585.min.js.map